---
layout: translation
title: Pro Git 2.9 Основы Git Работа с удалёнными репозиторями
---
<h2 id='___'>Работа с удалёнными репозиторями</h2>

<p>Чтобы иметь возможность совместной работы над каким-либо Git-проектом, необходимо знать как управлять удалёнными репозиториями. Удалённые репозитории — это модификации проекта, которые хранятся в интернете или ещё где-то в сети. Их может быть несколько, каждый из которых как правило доступен для вас либо только на чтение, либо на чтение и запись. Совместная работа включает в себя управление удалёнными репозиториями и помещение (push) и получение (pull) данных в и из них тогда, когда нужно обменяться результатами работы. Управление удалёнными репозиториями включает умение добавлять удалённые репозитории, удалять те из них, которые больше не действуют, умение управлять различными удалёнными ветками и определять их как ослеживаемые (tracked) или нет и прочее. Данный раздел охватывает все перечисленные навыки по управлению удалёнными репозиториями.</p>

<h3 id='__'>Отображение удалённых репозиториев</h3>

<p>Чтобы просмотреть какие удалённые серверы у вас уже настроены, следует выполнить команду git remote. Она перечисляет список имён-сокращений для всех уже указанных удалённых дескрипторов. Если вы склонировали ваш репозиторий, у вас должен отобразиться по крайней мере origin — это имя по умолчанию, которое Git присваивает серверу, с которого вы склонировали:</p>

<pre><code>$ git clone git://github.com/schacon/ticgit.git
Initialized empty Git repository in /private/tmp/ticgit/.git/
remote: Counting objects: 595, done.
remote: Compressing objects: 100% (269/269), done.
remote: Total 595 (delta 255), reused 589 (delta 253)
Receiving objects: 100% (595/595), 73.31 KiB | 1 KiB/s, done.
Resolving deltas: 100% (255/255), done.
$ cd ticgit
$ git remote
origin</code></pre>

<p>Чтобы посмотреть какому URL соответствует сокращённое именя в Git, можно указать команде опцию <code>-v</code>:</p>

<pre><code>$ git remote -v
origin	git://github.com/schacon/ticgit.git</code></pre>

<p>Если у вас больше одного удалённого репозитория, команда покажет их все. Например, мой репозиторий Grit выглядит следующим образом.</p>

<pre><code>$ cd grit
$ git remote -v
bakkdoor  git://github.com/bakkdoor/grit.git
cho45     git://github.com/cho45/grit.git
defunkt   git://github.com/defunkt/grit.git
koke      git://github.com/koke/grit.git
origin    git@github.com:mojombo/grit.git</code></pre>

<p>Это означает, что мы легко можем получить изменения от любого из этих пользователей. Но, заметьте, что origin — это единственный удалённый сервер прописанный как SSH ссылка, поэтому он единственный, в который я могу помещать свои изменения (это будет рассмотрено в Главе 4).</p>

<h3 id='__'>Добавление удалённых репозиториев</h3>

<p>В предыдущих разделах мы упомянули и немного продемонстрировали добавление удалённых репозиториев, сейчас мы рассмотрим это более детально. Чтобы добавить новый удалённый Git-репозиторий под именем-сокращением, к которому будет проще обращаться, выполните <code>git remote add [сокращение] [url]</code>:</p>

<pre><code>$ git remote
origin
$ git remote add pb git://github.com/paulboone/ticgit.git
$ git remote -v
origin	git://github.com/schacon/ticgit.git
pb	git://github.com/paulboone/ticgit.git</code></pre>

<p>Теперь вы можете использовать в командной строке имя pb вместо полного URL. Например, если вы хотите извлечь (fetch) всю информацию, которая есть в репозитории Павла, но нет в вашем, вы можете выполнить git fetch pb:</p>

<pre><code>$ git fetch pb
remote: Counting objects: 58, done.
remote: Compressing objects: 100% (41/41), done.
remote: Total 44 (delta 24), reused 1 (delta 0)
Unpacking objects: 100% (44/44), done.
From git://github.com/paulboone/ticgit
 * [new branch]      master     -&gt; pb/master
 * [new branch]      ticgit     -&gt; pb/ticgit</code></pre>

<p>Ветка master Павла теперь доступна локально как <code>pb/master</code>. Вы можете слить (merge) её в одну из ваших веток, или теперь вы можете перейти на эту ветку если вы хотите её просмотреть.</p>

<h3 id='fetch__pull'>Fetch и Pull</h3>

<p>Как вы только что узнали, для получения данных из удалённых проектов, следует выполнить:</p>

<pre><code>$ git fetch [remote-name]</code></pre>

<p>Данная команда связывается с указанным удалённым проектом и забирает все те данные проекта, которых у вас ещё нет. После того как вы выполнили команду, у вас должны появиться ссылки на все ветки из этого удалённого проекта. Теперь эти ветки в любой момент могут быть просмотрены или слиты. (В 3 Главе мы перейдём к более детальному рассмотрению, что такое ветки и как их использовать.)</p>

<p>Когда вы клонируете репозиторий, команда clone автоматически добавляет этот удалённый репозиторий под именем origin. Таким образом <code>git fetch origin</code> извлекает все наработки, отправленные (push) на этот сервер после того, как вы склонировали его (или получили изменения с помощью fetch). Важно отметить, что команда fetch забирает данные в ваш локальный репозиторий, но не сливает их с какими-либо вашими наработками, и не модифицирует то, над чем вы работаете в данный момент. Вам необходимо вручную слить эти данные с вашими, когда вы будете готовы.</p>

<p>Если у вас есть ветка настроенная на отслеживание удалённой ветки (для дополнительной информации смотри следующий раздел и Главу 3), то вы можете использовать команду <code>git pull</code>. Она автоматичеси извлекает и затем сливает данные из удалённой ветки в вашу текущую ветку. Этот способ может для вас оказаться более простым или более удобным. К тому же по умолчанию команда <code>git clone</code> автоматически настраивает вашу локальную ветку master на отслеживание удалённой ветки master на сервере, с которого вы клонировали (подразумевается, что на удалённом сервере есть ветка master). Выполнение <code>git pull</code> как правило извлекает (fetch) данные с сервера, с которого вы изначально склонировали, и автоматически пытается слить (merge) их с кодом, над которым вы в данный момент работаете.</p>

<h3 id='push'>Push</h3>

<p>Когда ваш проект достигает момента, когда вы хотите поделиться наработками, вам необходимо отправить (push) их в главный репозиторий. Команда для этого действия простая: <code>git push [удал. сервер] [ветка]</code>. Чтобы отправить вашу ветку master на сервер <code>origin</code> (повторимся, что клонирование как правило настраивает оба этих имени автоматически), вы можете выполнить следующую команду для отправки наработок обратно на сервер:</p>

<pre><code>$ git push origin master</code></pre>

<p>Эта команда срабатывает только в случае, если вы клонировали с сервера, на котором у вас есть права на запись, и если никто другой с тех пор не выполнял команду push. Если вы и кто-то ещё одновременно клонируете, затем он выполняет команду push, а затем команду push выполняете вы, то ваш push точно будет отклонён. Вам придётся сначала вытянуть (pull) их изменения и объединить с вашими. Только после этого вам будет позволено выполнить push. Смотри Главу 3 для более подробного описания как отправлять (push) данные на удалённый сервер.</p>

<h3 id='__'>Инспекция удалённого репозитория</h3>

<p>Если хотите получить побольше информации об одном из удалённых репозиториев, вы можете использовать команду <code>git remote show [удал. сервер]</code>. Если вы выполните эту команду с некоторым именем, например, <code>origin</code>, вы получите что-то подобное:</p>

<pre><code>$ git remote show origin
* remote origin
  URL: git://github.com/schacon/ticgit.git
  Remote branch merged with &#39;git pull&#39; while on branch master
    master
  Tracked remote branches
    master
    ticgit</code></pre>

<p>Она выдаёт URL удалённого репозитория, а также информацию об отслеживаемых ветках. Эта команда любезно сообщает вам, что, если вы находясь на ветке master, выполните <code>git pull</code>, ветка master с удалённого сервера будет автоматически влита в вашу сразу после получения всех необходимых данных. Она также выдаёт список всех полученных ею ссылок.</p>

<p>Это был пример для простой ситуации, и наверняка вы встретились с чем-то подобным. Однако, если вы используете Git более интенсивно, вы можете увидеть гораздо большее количество информации от <code>git remote show</code>:</p>

<pre><code>$ git remote show origin
* remote origin
  URL: git@github.com:defunkt/github.git
  Remote branch merged with &#39;git pull&#39; while on branch issues
    issues
  Remote branch merged with &#39;git pull&#39; while on branch master
    master
  New remote branches (next fetch will store in remotes/origin)
    caching
  Stale tracking branches (use &#39;git remote prune&#39;)
    libwalker
    walker2
  Tracked remote branches
    acl
    apiv2
    dashboard2
    issues
    master
    postgres
  Local branch pushed with &#39;git push&#39;
    master:master</code></pre>

<p>Данная команда показывает какая именно локальная ветка будет отправлена на удалённый сервер по умолчанию при выполнении <code>git push</code>. Она также показывает каких веток с удалённого сервера у вас ещё нет, какие ветки всё ещё есть у вас, но уже удалены на сервере. И для нескольких веток показано какие удалённые ветки будут в них влиты при выполнении <code>git pull</code>.</p>

<h3 id='____'>Удаление и переименование удалённых репозиториев</h3>

<p>Для переименования ссылок в новых версиях Git можно вылолнить <code>git remote rename</code>, это изменит сокращённое имя, используемое для удалённого репозитория. Например, если вы хотите переименовать <code>pb</code> в <code>paul</code>, вы можете сделать это следующим образом:</p>

<pre><code>$ git remote rename pb paul
$ git remote
origin
paul</code></pre>

<p>Стоит упомянуть, что это также меняет для вас имена удалённых веток. То, к чему вы обращались как <code>pb/master</code>, стало <code>paul/master</code>.</p>

<p>Если по какой-то причине вы хотите удалить ссылку (вы сменили сервер или больше не используете определённое зеркало, или, возможно, контрибьютор перестал быть активным), вы можете использовать <code>git remote rm</code>:</p>

<pre><code>$ git remote rm paul
$ git remote
origin</code></pre>

<div id='nav'>
<a href='ch2-8.html'>prev</a> | <a href='ch2-10.html'>next</a>
</div>