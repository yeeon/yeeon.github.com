---
layout: translation
title: Pro Git 4.5 Git на сервере Открытый доступ
---
<h2 id='_'>Открытый доступ</h2>

<p>Что если вы хотите иметь анонимный доступ к вашему проекту на чтение? Возможно вместо размещения внутреннего закрытого проекта, вы хотите разместить проект с открытым исходным кодом. Или, может быть, у вас есть автоматизированные серверы сборки или серверы непрерывной интеграции, которые часто изменяются, и вы не хотите постоянно перегенерировать SSH-ключи, а вы просто хотите добавить анонимный доступ на чтение.</p>

<p>Вероятно, наиболее простой способ для небольших конфигураций ― запустить статический веб-сервер, указав в качестве корневого каталога для документов каталог, в котором расположены ваши репозитории Git, и разрешив хук <code>post-update</code>, как было показано в первой части этой главы. Давайте продолжим работу с предыдущего примера. Допустим, ваши репозитории расположены в каталоге <code>/opt/git</code>, и сервер Apache запущен на вашей машине. Повторюсь, вы можете использовать любой веб-сервер, но в качестве примера мы покажем несколько основных конфигураций Apache, которые покажут основную идею что нужно сделать.</p>

<p>Для начала вам следует включить хук:</p>

<pre><code>$ cd project.git
$ mv hooks/post-update.sample hooks/post-update
$ chmod a+x hooks/post-update</code></pre>

<p>Если вы используете версию Git ниже 1.6, то команда <code>mv</code> не нужна ― добавление суффикса .sample к именам примеров хуков началось только недавно.</p>

<p>Что делает хук <code>post-update</code>? Обычно он выглядит так:</p>

<pre><code>$ cat .git/hooks/post-update 
#!/bin/sh
exec git-update-server-info</code></pre>

<p>Это означает, что когда вы отправляете что-то с помощью <code>git push</code> на сервер по SSH, Git будет запускать эту команду, чтобы обновить файлы необходимые для скачивания по HTTP.</p>

<p>Затем, вы должны добавить запись VirtualHost в конфигурацию вашего Apache с корневым каталогом документов в каталоге с вашими проектами Git. Здесь мы подразумеваем, что ваш DNS сервер настроен на отправку <code>*.gitserver</code> на машину, на которую вы используете, чтобы запустить все это:</p>

<pre><code>&lt;VirtualHost *:80&gt;
    ServerName git.gitserver
    DocumentRoot /opt/git
    &lt;Directory /opt/git/&gt;
        Order allow, deny
        allow from all
    &lt;/Directory&gt;
&lt;/VirtualHost&gt;</code></pre>

<p>Вам также понадобится установить Unix-группу для каталога <code>/opt/git</code> в <code>www-data</code>, чтобы ваш веб-сервер получил доступ на чтение этих каталогов, поскольку (по умолчанию) Apache запускает CGI-сценарии от имени такого пользователя:</p>

<pre><code>$ chgrp -R www-data /opt/git</code></pre>

<p>После перезапуска Apache, вы должны получить возможность склонировать ваши репозитории из этого каталога указывая их в URL:</p>

<pre><code>$ git clone http://git.gitserver/project.git</code></pre>

<p>Таким образом, вы можете настроить доступ на чтение по HTTP к любому из ваших проектов для значительного количества пользователей за несколько минут. Другой простой способ дать открытый неаутентифицируемый доступ ― использовать Git-демон, однако это требует запуска процесса демона. Мы рассмотрим этот вариант в следующем разделе, если вы предпочитаете этот вариант.</p>

<div id='nav'>
<a href='ch4-4.html'>prev</a> | <a href='ch4-6.html'>next</a>
</div>